---
layout: default
title: Command Usage - Reference Manual - csvq
category: reference
---

# Command Usage

```bash
csvq [global options] [subcommand [subcommand options]] ["query"|"statements"]
```

## Global Options
{: #global_options}

--delimiter value, -d value    
: Field delimiter. Default is "," for csv files, "\t" for tsv files.

--encoding value, -e value
: File encoding. Default is "UTF8". Following encodings are supported.

  | value(case ignored) | character encoding |
  | :- | :- |
  | UTF8 | UTF-8 |
  | SJIS | Shift JIS |

--line-break value, -l value
: Line break. Default is "LF". One of following values

  | value(case ignored) | unicode character |
  | :- | :- |
  | CRLF | U+000D Carriage Return and U+000A Line Feed |
  | CR   | U+000D Carriage Return |
  | LF   | U+000A Line Feed |

--timezone value, -z value
: Default TimeZone. Default is "Local".
  
  "Local", "UTC" or a timezone name in the IANA TimeZone database(in the form of "Area/Location". e.g. "America/Los_Angeles").
  
  > The timezone database is required in order to use the timezone names.
  > Most Unix-like systems provide the database.
  > But if your system does not provide it and you have not installed Go Lang, then you must put the database file named [zoneinfo.zip](https://golang.org/lib/time/) to the directory "$ZONEINFO" or "$GOROOT/lib/time/". 

--repository value, -r value
: Directory path where files are located. Default is the current directory.

--source FILE, -s FILE
: Load query or statements from FILE

--datetime-format value, -t value
: Datetime format to parse strings.
  Format string is the same as the function [DATETIME_FORMAT]({{ '/reference/datetime-functions.html#datetime_format' | relative_url }}).

--no-header, -n
: Import the first line as a record

  First line of a CSV file is dealt with as the header line. In case "--no-header" option passed, 
  fields are automatically named as "c" and following sequential number. e.g. "c1", "c2", "c3", ...

--without-null, -a
: Parse empty fields as empty strings

  In most cases CSV fields are imported as string values, but no-quoted empty fields are imported as null.
  By using "--without-null" option, no-quoted empty fields are imported as empty string values.

--help, -h
: Show help

--version, -v
: Print the version

> Some of global options can be specified in statements by using [Set Flag Statements]({{ '/reference/flag.html' | relative_url }}).

## Sub Commands

| subcommand | description |
|:-|:-|
| [write](#write)   | Write output to file |
| [fields](#fields) | Show fields in file |
| [calc](#calc)     | Calculate value from stdin |
| help, h           | Shows a list of commands or help for one command |

> When execute csvq without subcommand, the result is same as "write" subcommand with no subcommand option.

### Write Subcommand
{: #write}

Write output to a file.
```bash
csvq [global options] write [subcommand options] ["query"|"statements"]
```

#### Options

--write-encoding value, -E value
: File encoding. Default is "utf8".

--out FILE, -o FILE
: Write output to FILE. Default is empty string. Empty string is interpreted as standard output.

--format value, -f value
: Output format. Default is "TEXT". One of flollowing values

  | value(case ignored) | description |
  | :- | :- |
  | CSV  | Comma separated values. Separetor can be changed by -D option. |
  | TSV  | Tab separated values |
  | JSON | JSON format |
  | TEXT | Output format for console |

--write-delimiter value, -D value
: Field delimiter for CSV

--without-header, -N
: When the file format is specified as CSV or TSV, write without the header line

--help, -h
: Show help

### Fields Subcommand
{: #fields}

Show fields in a file.
```bash
csvq [global options] fields CSV_FILE_PATH
```

### Calc Subcommand
{: #calc}

Calculate a value from stdin.
```bash
csvq [global options] calc "expression"
```

In the expression, the value from stdin is represented as "c1".

Example:
```bash
$ echo 'foo' | csvq calc "base64_encode(c1)"
Zm9v
$ echo 123 | csvq calc "c1 + 100"
223
```

## Special Characters
In passed parameters and a query or statements, following strings represent special characters.  

| string | unicode character |
| :- | :- |
| \a   | U+0007 Bell |
| \b   | U+0008 Backspace |
| \f   | U+000C Form Feed |
| \n   | U+000A Line Feed |
| \r   | U+000D Carriage Return |
| \t   | U+0009 Horizontal Tab |
| \v   | U+000b Vertical Tab |
| \\"  | U+0022 Double Quote |
| \\\\ | U+005c Backslash |

