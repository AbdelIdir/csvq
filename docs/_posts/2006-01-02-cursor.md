---
layout: default
title: Cursor - Reference Manual - csvq
category: reference
---

# Cursor

A cursor is a pointer to a record in a view created by a select query.

## Usage Flow

1. [Declare](#declare) a cursor. 
2. [Open](#open) the cursor to create the view. The pointer is set to before the first record.
3. [Fetch](#fetch) the data of the referring record into variables.
   
   You can use the [WHILE IN LOOP statement]({{ '/reference/control-flow.html#while_in_loop' | relative_url }}) to fetch all records in loop.
   
4. [Close](#close) the cursor to discard the view.
5. [Dispose](#dispose) the cursor to discard the cursor definition as necessary.

### Cursor Status

You can get some cursor status as a ternary value by using [Cursor Status Expression]({{ '/reference/value.html#cursor_status' | relative_url }}).

## Declare Cursor
{: #declare}

```sql
DECLARE cursor_name CURSOR FOR select_query;
```

_cursor_name_
: [identifier]({{ '/reference/statement.html#parsing' | relative_url }})

_select_query_
: [Select Query]({{ '/reference/select-query.html' | relative_url }})

## Open Cursor
{: #open}

```sql
OPEN cursor_name;
```

_cursor_name_
: [identifier]({{ '/reference/statement.html#parsing' | relative_url }})

## Close Cursor
{: #close}

```sql
CLOSE cursor_name;
```

_cursor_name_
: [identifier]({{ '/reference/statement.html#parsing' | relative_url }})

## Dispose Cursor
{: #dispose}

```sql
DISPOSE CURSOR cursor_name;
```

_cursor_name_
: [identifier]({{ '/reference/statement.html#parsing' | relative_url }})

## Fetch Cursor
{: #fetch}

```sql
FETCH [position] cursor_name INTO variable [, variable ...];

position
  : [NEXT|PRIOR|FIRST|LAST|ABSOLUTE number|RELATIVE number]
```

_cursor_name_
: [identifier]({{ '/reference/statement.html#parsing' | relative_url }})

_variable_
: [Variable]({{ '/reference/variable.html' | relative_url }})

_number_
: [integer]({{ '/reference/value.html#integer' | relative_url }})

### Position

A Position keyword in a _fetch cursor statement_ specifies a record to set the pointer.
If specified record does not exist, the _fetch cursor statement_ is set nulls to the variables.

If any position keyword is not specified, then the NEXT keyword is used to fetch.

NEXT
: The pointer is set to the next record and return the record.

PRIOR
: The pointer is set to the previous record and return the record.

FIRST
: The pointer is set to the first record and return the record.

LAST
: The pointer is set to the last record and return the record.

ABSOLUTE number
: The pointer is set to the _number_-th record from the first record and return the record.
  _"ABSOLUTE 0"_ represents the first record.

RELATIVE number
: The pointer is set to the _number_-th record from the current record and return the record.
  _"RELATIVE 0"_ represents the current record.
